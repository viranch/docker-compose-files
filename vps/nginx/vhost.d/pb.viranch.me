location ~ ^/(.+)$ {
    limit_except GET {
        auth_basic  "Restricted content";
        auth_basic_user_file    "/etc/nginx/htpasswd/pb";
    }
    if ($request_method = GET) {
        proxy_pass http://pb.viranch.me/raw/$1;
    }
    proxy_pass http://pb.viranch.me;
}
